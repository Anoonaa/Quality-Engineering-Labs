<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FinLab</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
  <!-- ===== NAVBAR ===== -->
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="nav-brand">
      <span class="brand-text">FinLab</span>
    </div>
    <ul class="nav-links">
      <li><a href="index.html" class="nav-link active" data-page="home">Home</a></li>
      <li><a href="transactions.html" class="nav-link" data-page="transactions">Transactions</a></li>
      <li><a href="market.html" class="nav-link" data-page="market">Market</a></li>
      <li><a href="payment.html" class="nav-link" data-page="payment">Payment</a></li>
      <li><a href="login.html" class="nav-link" data-page="login">Login</a></li>
    </ul>
    <div class="nav-user" id="nav-user">
      <span id="nav-username" data-testid="nav-username"></span>
      <button id="nav-logout" data-testid="logout-btn" class="btn btn-sm btn-outline" style="display:none;">Logout</button>
    </div>
  </nav>

  <!-- ===== HERO ===== -->
  <main>
    <section class="hero" data-testid="hero-section">
      <div class="hero-bg-pattern"></div>
      <div class="hero-content">
        <div class="hero-badge">Quality Engineering Lab</div>
        <h1 data-testid="hero-title">Fintech Testing Playground</h1>
        <p class="hero-subtitle" data-testid="hero-subtitle">
          A fintech app built to help you practice and explore Playwright's powerful testing features in a financial context.
        </p>
        <div class="hero-links">
          <a href="payment.html" class="hero-link">Payment</a>
          <a href="transactions.html" class="hero-link">Transactions</a>
          <a href="market.html" class="hero-link">Market</a>
          <a href="login.html" class="hero-link">Login</a>
        </div>
      </div>
      <!-- Decorative SVG illustration -->
      <div class="hero-illustration" aria-hidden="true">
        <svg viewBox="0 0 400 320" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="40" y="30" width="320" height="220" rx="12" fill="#f5f5f3" stroke="#e8e6e1" stroke-width="1.5"/>
          <rect x="40" y="30" width="320" height="36" rx="12" fill="#1a1a1a"/>
          <rect x="40" y="54" width="320" height="12" fill="#1a1a1a"/>
          <circle cx="60" cy="48" r="5" fill="#c53030"/>
          <circle cx="78" cy="48" r="5" fill="#c9a96e"/>
          <circle cx="96" cy="48" r="5" fill="#2d8a4e"/>
          <rect x="160" y="42" width="120" height="12" rx="6" fill="#333"/>
          <rect x="64" y="86" width="120" height="10" rx="3" fill="#e8e6e1"/>
          <rect x="64" y="106" width="200" height="8" rx="3" fill="#f0ede8"/>
          <rect x="64" y="122" width="160" height="8" rx="3" fill="#f0ede8"/>
          <rect x="64" y="150" width="272" height="36" rx="6" fill="#fff" stroke="#e8e6e1" stroke-width="1"/>
          <rect x="72" y="158" width="80" height="20" rx="4" fill="#f5f5f3"/>
          <rect x="64" y="200" width="100" height="32" rx="6" fill="#1a1a1a"/>
          <rect x="76" y="212" width="76" height="8" rx="3" fill="#fff"/>
          <rect x="176" y="200" width="80" height="32" rx="6" fill="#fff" stroke="#e8e6e1" stroke-width="1"/>
          <rect x="188" y="212" width="56" height="8" rx="3" fill="#e8e6e1"/>
          <line x1="64" y1="146" x2="336" y2="146" stroke="#e8e6e1" stroke-width="1"/>
          <rect x="300" y="86" width="36" height="36" rx="8" fill="#f0ede8"/>
          <path d="M312 98 L318 104 L324 98" stroke="#c9a96e" stroke-width="2" fill="none" stroke-linecap="round"/>
          <path d="M312 106 L318 112 L324 106" stroke="#c9a96e" stroke-width="2" fill="none" stroke-linecap="round"/>
          <!-- Cursor -->
          <path d="M290 240 L298 268 L304 258 L316 264 L312 254 L302 254 L290 240Z" fill="#1a1a1a" stroke="#fff" stroke-width="1.5"/>
        </svg>
      </div>
    </section>

    <!-- ===== ABOUT SECTION ===== -->
    <section class="about-section" data-testid="about-section">
      <div class="container">
        <div class="about-grid">
          <div class="about-text">
            <h2 class="about-heading">Built for Learning</h2>
            <p class="about-description">
              This fintech playground provides real-world financial UI patterns for practicing end-to-end testing with Playwright.
              Each page focuses on a different testing scenario - from payment forms and transaction management to
              live market data and authentication flows.
            </p>
            <div class="about-stats">
              <div class="about-stat">
                <span class="about-stat-value">5</span>
                <span class="about-stat-label">Interactive Pages</span>
              </div>
              <div class="about-stat">
                <span class="about-stat-value">3</span>
                <span class="about-stat-label">API Integrations</span>
              </div>
              <div class="about-stat">
                <span class="about-stat-value">50+</span>
                <span class="about-stat-label">Test Scenarios</span>
              </div>
            </div>
          </div>
          <div class="about-visual" aria-hidden="true">
            <div class="about-code-block">
              <div class="code-header">
                <span class="code-dot code-dot--red"></span>
                <span class="code-dot code-dot--yellow"></span>
                <span class="code-dot code-dot--green"></span>
                <span class="code-filename">example.spec.ts</span>
              </div>
              <pre class="code-body"><code><span class="code-kw">import</span> { test, expect } <span class="code-kw">from</span> <span class="code-str">'@playwright/test'</span>;

<span class="code-fn">test</span>(<span class="code-str">'deposit increases balance'</span>, <span class="code-kw">async</span> ({ page }) => {
  <span class="code-kw">await</span> page.goto(<span class="code-str">'/'</span>);
  <span class="code-kw">await</span> page.getByTestId(<span class="code-str">'deposit-btn'</span>).click();
  <span class="code-kw">await</span> expect(page.getByTestId(<span class="code-str">'balance-value'</span>))
    .toHaveText(<span class="code-str">'$1,100'</span>);
});</code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== INTERACTIVE DEMOS ===== -->
    <div class="container">
      <div class="divider"></div>

      <!-- ===== COUNTER SECTION ===== -->
      <section class="counter-section" data-testid="balance-section">
        <h2 class="section-title">Quick Balance</h2>
        <p class="section-desc">A simple balance widget to test state changes and button interactions.</p>
        <div class="counter-card">
          <div class="counter-box">
            <button class="btn btn-icon" data-testid="withdraw-btn" id="withdraw-btn" aria-label="Withdraw">
              <i data-lucide="minus"></i>
            </button>
            <span class="counter-value" data-testid="balance-value" id="balance-value">$1,000</span>
            <button class="btn btn-icon" data-testid="deposit-btn" id="deposit-btn" aria-label="Deposit">
              <i data-lucide="plus"></i>
            </button>
          </div>
          <button class="btn btn-outline" data-testid="reset-btn" id="reset-btn">Reset Balance</button>
        </div>
      </section>

      <div class="divider"></div>

      <!-- ===== JOKE SECTION ===== -->
      <section class="joke-section" data-testid="rate-section">
        <h2 class="section-title">Live Exchange Rate</h2>
        <p class="section-desc">Fetches a live USD to ZAR exchange rate - great for testing async content.</p>
        <div class="joke-box">
          <p class="joke-text" data-testid="rate-text" id="rate-text">Click the button to fetch the latest rate!</p>
          <div class="joke-loading" data-testid="rate-loading" id="rate-loading" style="display:none;">
            <i data-lucide="loader" class="spin"></i> Loading...
          </div>
        </div>
        <button class="btn btn-primary" data-testid="fetch-rate-btn" id="fetch-rate-btn">
          <i data-lucide="refresh-cw"></i> Get Rate
        </button>
      </section>
    </div>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="footer" role="contentinfo">
    <div class="footer-inner">
      <p>&copy; 2026 FinLab</p>
      <ul class="footer-links">
        <li><a href="transactions.html">Transactions</a></li>
        <li><a href="market.html">Market</a></li>
        <li><a href="payment.html">Payment</a></li>
        <li><a href="login.html">Login</a></li>
      </ul>
    </div>
  </footer>

  <script src="app.js"></script>
  <script>
    // Balance
    let balance = 1000;
    const balanceEl = document.getElementById('balance-value');

    function formatBalance(val) {
      const prefix = val < 0 ? '-$' : '$';
      return prefix + Math.abs(val).toLocaleString();
    }

    document.getElementById('deposit-btn').addEventListener('click', () => {
      balance += 100;
      balanceEl.textContent = formatBalance(balance);
    });
    document.getElementById('withdraw-btn').addEventListener('click', () => {
      balance -= 100;
      balanceEl.textContent = formatBalance(balance);
    });
    document.getElementById('reset-btn').addEventListener('click', () => {
      balance = 1000;
      balanceEl.textContent = formatBalance(balance);
    });

    // Exchange rate fetcher
    document.getElementById('fetch-rate-btn').addEventListener('click', async () => {
      const rateText = document.getElementById('rate-text');
      const loading = document.getElementById('rate-loading');
      rateText.style.display = 'none';
      loading.style.display = 'flex';
      try {
        const res = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
        const data = await res.json();
        const zarRate = data.rates.ZAR;
        rateText.textContent = `1 USD = ${zarRate.toFixed(4)} ZAR`;
      } catch (e) {
        rateText.textContent = 'Failed to load rate. Try again!';
      }
      loading.style.display = 'none';
      rateText.style.display = 'block';
    });
  </script>
</body>
</html>
